---
title: 四、新系统的基本环境配置
layout: /src/layouts/autonum.astro
---

本阶段对应于官方指南的以下步骤：

- Fstab
- Chroot
- 时区
- 本地化
- 网络配置
- Initramfs
- Root 密码
- 安装引导程序
- （提前）安装后的工作（这里是本文与官方指南的不同之处。见后面的“[真的要先重启吗](#真的要先重启吗)”）
- 重启（ **按照指南，到这里才退出 chroot** ）


# Chroot

注意：

- 在整个 chroot 到新系统的过程中， **直到你退出 chroot 之前** ，都应当记住 chroot 是变换（change）根目录（root）。
  - 比如你的新系统位于 `/mnt` ，那么在 chroot 之后，你的 `/` 实际上变成了外部的 `/mnt` ，整个目录树也都是这样对应地变化的。
  - 比如在“安装引导程序”中安装 GRUB 时，WiKi 中的“把 esp 替换成 ESP 分区挂载点”的 ESP 的挂载点，与你之前“挂载分区”中的在本质上是相同的，但是，在形式上应当对应地变换路径：
    例如，假如之前你将 ESP 分区挂载到了 `/mnt/boot` ，则你的 ESP 挂载点应当写为 `/boot` 。
- arch-chroot 本质上也是 chroot，只是预先做了一点其他准备。


# 安装引导程序

新手建议使用 GRUB。
步骤参见 [GRUB](https://wiki.archlinuxcn.org/wiki/GRUB#安装) 即可。

不过，如果你想了解得更深一点，比如 UEFI 与 GPT 的情形下为什么要指定 esp，boot 分区又是什么，等等，那么：

- 请先阅读本文中的“[Arch Linux 启动流程](#arch-linux-启动流程)”一节。

在此基础上：

- 可见，GRUB 是“分体式”的，自然要同时指定 esp 与 boot 分区。

这也是为什么 esp 的文件系统要被限定为 fat32——因为它是供 UEFI 使用的，而 UEFI 作为主板自带的固件，能力自然是有限的（越是底层的部件，就越强调稳定性，这在一定程度上与功能的丰富性互斥），只支持这样的 esp。
